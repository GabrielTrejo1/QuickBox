{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% if tipo_objeto == "ruta" %}Editar Ruta{% elif tipo_objeto == "ruta_cancelada" %}Ruta Cancelada{% endif %}</title>
    <link
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
      rel="stylesheet" />
    <link rel="stylesheet" href="{% static 'css/styles.css' %}" />
    <link rel="stylesheet" href="{% static 'css/pantalla_ruta.css' %}" />
</head>
<body class="d-flex justify-content-center align-items-center" style="height: 100vh">
    {% include "includes/navbar.html" %}

        <div class="row justify-content-center">
            <div class="card">
                <div class="card shadow-lg rounded-4">
                  {% if tipo_objeto == "ruta" %}
                    <div class="card-header text-center">
                        <h2 id="titulo">EDITAR RUTA</h2>
                    </div>
                    <div class="card-body p-4">
                        <form method="post" novalidate>
                            {% csrf_token %}
                            {% for field in form %}
                              <div class="form-group d-flex justify-content-center align-items-center mb-4">
                                <label for="{{ field.id_for_label }}" class="mr-2 mb-0" style="min-width: 80px; text-align: right;">{{ field.label }}</label>
                                {{ field }}
                            </div>
                                    {% if field.errors %}
                                        <div class="text-danger mt-2">{{ field.errors }}</div>
                                    {% endif %}
                            </div>
                            {% endfor %}
                  {% endif %}
      {% if tipo_objeto == "ruta" %}
      <div class="container p-4">
        <h2 style="text-align: center;">Pedidos asignados a esta Ruta</h2>

          <div class="card-body" style="padding: 0.5rem;">
            <table class="table table-striped table-hover">
              <thead class="thead-dark" style="line-height: 0.8rem;">
                <tr>
                  <th>Dirección</th>
                  <th>CP</th>
                  <th>Fecha de Carga</th>
                  <th>Estado</th>
                  <th>Acciones</th>
                </tr>
              </thead>
              <tbody>
                {% for pedido in pedidos %}
                <tr>
                  <td>{{ pedido.direccion }}</td>
                  <td>{{ pedido.codigo_postal }}</td>
                  <td>{{ pedido.fecha_carga }}</td>
                  <td {% if pedido.estado == "Pendiente" %} style="color: rgb(221, 169, 0);"
                    {% elif pedido.estado == "Entregado" %} style="color: rgb(76, 198, 0);" {% endif %}>
                    {{ pedido.estado }}</td>
                  <td>
                    <a href="{% url 'quitar_de_ruta' pedido.id_pedido %}" style="color: Red;text-decoration: none; ">Quitar de la Ruta</a>
                  </td>
                </tr>
                {% empty %}
                <tr>
                  <td colspan="6" class="text-center">No hay pedidos disponibles.</td>
                </tr>
                {% endfor %}
              </tbody>
            </table>

          </div>
        </div>
      </div>
      {% elif tipo_objeto == "ruta_cancelada" %}
      <div class="container p-4">
        <h2 style="text-align: center;">Pedidos asignados a esta Ruta</h2>

        <div class="card">
          <div class="card-body" style="padding: 0.5rem;">
            <table class="table table-striped table-hover">
              <thead class="thead-dark" style="line-height: 0.8rem;">
                <tr>
                  <th>Dirección</th>
                  <th>CP</th>
                  <th>Fecha de Carga</th>
                  <th>Estado</th>
                </tr>
              </thead>
              <tbody>
                {% for pedido in pedidos %}
                <tr>
                  <td>{{ pedido.direccion }}</td>
                  <td>{{ pedido.codigo_postal }}</td>
                  <td>{{ pedido.fecha_carga }}</td>
                  <td {% if pedido.estado == "Pendiente" %} style="color: rgb(221, 169, 0);"
                    {% elif pedido.estado == "Entregado" %} style="color: rgb(76, 198, 0);" {% endif %}>
                    {{ pedido.estado }}</td>
                </tr>
                {% empty %}
                <tr>
                  <td colspan="6" class="text-center">No hay pedidos disponibles.</td>
                </tr>
                {% endfor %}
              </tbody>
            </table>

          </div>
        </div>
      </div>
      {% endif %}
                            {% if tipo_objeto == "ruta" %}
                            <button type="submit" class="btn btn-primary w-50" style="place-self: center;">
                                Actualizar Ruta
                            </button>
                            {% elif tipo_objeto == "ruta_cancelada" %}
                            <a href="{% url 'ruta_list' %}" class="btn btn-primary w-100" id="cancelar">Volver</a>
                            {% endif %}
                        </form>
                    </div>
                </div>
        </div>
    </div>
</body>
</html>